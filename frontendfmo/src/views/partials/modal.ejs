<style>
    /* --- ESTILOS DEL MODAL FLOTANTE (TOAST) --- */
    #globalModalContainer {
        position: fixed;
        bottom: 30px;
        right: 30px; /* Esquina inferior derecha */
        z-index: 9999; /* Por encima de todo */
        display: none; /* Oculto por defecto */
        flex-direction: column;
        gap: 15px;
        font-family: 'Segoe UI', sans-serif;
    }

    .fmo-toast {
        width: 350px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        overflow: hidden;
        animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border-left: 6px solid #d6291c; /* Color por defecto (Rojo FMO) */
        position: relative;
    }

    /* Animación de entrada */
    @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    /* Animación de salida */
    @keyframes fadeOutRight {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
    }

    .fmo-toast.hide-anim {
        animation: fadeOutRight 0.4s ease forwards;
    }

    /* --- CABECERA --- */
    .fmo-toast-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 15px;
        border-bottom: 1px solid #eee;
        background: #fff;
    }

    .fmo-toast-title {
        font-weight: 800;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        color: #333;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .btn-close-toast {
        background: none;
        border: none;
        color: #999;
        cursor: pointer;
        font-size: 1.2rem;
        transition: color 0.2s;
    }
    .btn-close-toast:hover { color: #d6291c; }

    /* --- CUERPO (Donde va el innerHTML) --- */
    .fmo-toast-body {
        padding: 15px;
        font-size: 0.95rem;
        color: #555;
        line-height: 1.5;
    }

    /* --- VARIANTES DE COLOR (PALETA) --- */
    
    /* ERROR (Rojo Intenso) */
    .fmo-toast.error {
        border-left-color: #dd0303;
    }
    .fmo-toast.error .fmo-toast-title { color: #dd0303; }
    .fmo-toast.error .fmo-icon { color: #dd0303; }

    /* ADVERTENCIA (Naranja) */
    .fmo-toast.warning {
        border-left-color: #fa812f;
    }
    .fmo-toast.warning .fmo-toast-title { color: #fa812f; }
    .fmo-toast.warning .fmo-icon { color: #fa812f; }

    /* INFO (Naranja Rojizo) */
    .fmo-toast.info {
        border-left-color: #f25912;
    }
    .fmo-toast.info .fmo-toast-title { color: #f25912; }
    .fmo-toast.info .fmo-icon { color: #f25912; }

    /* ÉXITO (Verde - Excepción para semántica visual) */
    .fmo-toast.success {
        border-left-color: #28a745;
    }
    .fmo-toast.success .fmo-toast-title { color: #28a745; }
    .fmo-toast.success .fmo-icon { color: #28a745; }

</style>

<div id="globalModalContainer">
    </div>

<script>
    /**
     * Sistema Global de Notificaciones FMO
     * Reemplaza a alert()
     */
    const GlobalModal = {
        container: document.getElementById('globalModalContainer'),

        /**
         * Muestra una notificación flotante
         * @param {string} htmlContent - Contenido HTML a inyectar (puede ser texto o tags)
         * @param {string} type - 'success', 'error', 'warning', 'info'
         * @param {number} duration - Tiempo en ms (default 4000)
         */
        mostrar: function(htmlContent, type = 'info', duration = 4000) {
            
            // 1. Definir Icono y Título según tipo
            let icon = 'bi-info-circle-fill';
            let title = 'Información';

            switch(type) {
                case 'error':   icon = 'bi-x-circle-fill'; title = 'Error'; break;
                case 'success': icon = 'bi-check-circle-fill'; title = 'Éxito'; break;
                case 'warning': icon = 'bi-exclamation-triangle-fill'; title = 'Atención'; break;
            }

            // 2. Crear el elemento HTML del Toast
            const toast = document.createElement('div');
            toast.className = `fmo-toast ${type}`;
            
            toast.innerHTML = `
                <div class="fmo-toast-header">
                    <span class="fmo-toast-title">
                        <i class="bi ${icon} fmo-icon"></i> ${title}
                    </span>
                    <button class="btn-close-toast" onclick="GlobalModal.cerrar(this)">
                        <i class="bi bi-x"></i>
                    </button>
                </div>
                <div class="fmo-toast-body">
                    ${htmlContent}
                </div>
            `;

            // 3. Mostrar contenedor y agregar toast
            this.container.style.display = 'flex';
            this.container.appendChild(toast);

            // 4. Auto-cierre
            if (duration > 0) {
                setTimeout(() => {
                    this.cerrar(toast.querySelector('.btn-close-toast'));
                }, duration);
            }
        },

        /**
         * Efecto de cierre suave
         */
        cerrar: function(btn) {
            // El botón está dentro del header, subimos al padre .fmo-toast
            const toast = btn.closest('.fmo-toast');
            if (toast) {
                toast.classList.add('hide-anim');
                toast.addEventListener('animationend', () => {
                    toast.remove();
                    // Si no quedan notificaciones, ocultar contenedor
                    if (this.container.children.length === 0) {
                        this.container.style.display = 'none';
                    }
                });
            }
        }
    };

    // Exponer globalmente
    window.mostrarModal = (html, tipo, duracion) => GlobalModal.mostrar(html, tipo, duracion);
</script>